services:
  web-traffic:
    container_name: web-traffic
    build:
      context: ./cloudflare-traffic
      dockerfile: Dockerfile
    restart: always
    ports:
      - "3001:3000"
    environment:
      # --- Nuxt åŸºæœ¬è¨­å®š ---
      - NUXT_HOST=0.0.0.0
      - NUXT_PORT=3000
      - NUXT_SECRET=my-super-secret-key-change-this

      # --- ä¸»è³‡æ–™åº« (åŸæœ¬å°±æœ‰ NUXT_ï¼Œä¿æŒåŸæ¨£) ---
      - NUXT_DB_HOST=172.17.0.1
      - NUXT_DB_USER=root
      - NUXT_DB_PASSWORD=!Wis@53952935
      - NUXT_DB_NAME=app_db

      # --- æµé‡è³‡æ–™åº« (ğŸ”¥ åŠ ä¸Š NUXT_ å‰ç¶´) ---
      - NUXT_TRAFFIC_DB_HOST=172.17.0.1
      - NUXT_TRAFFIC_DB_USER=traffic_admin
      - NUXT_TRAFFIC_DB_PASSWORD=Traffic-2026-Go
      - NUXT_TRAFFIC_DB_NAME=traffic_db

      # --- Cloudflare è¨­å®š (ğŸ”¥ åŠ ä¸Š NUXT_ å‰ç¶´) ---
      - NUXT_CF_API_TOKEN=5w7ureqSAn5UbUg6u3zlmlXtB9-EjcYn5y2vqENX
      - NUXT_CF_ZONE_ID_TW=0cea2e92a413ce621b8633811b10bdd9
      - NUXT_CF_ZONE_ID_MY=156893be0036d4e6a7975d2bfbf91aba
